language: python
python:
  - "2.6"
  - "2.7"
addons:
  apt:
    packages:
      - libc6
      - fftw3
      - libfftw3-3
      - libgsl0ldbl
      - zlib1g
      - libgsl0
      - libgsl0ldbl
cache:
  directories:
    - lscsoft/libframe-8.20
    - lscsoft/ldas-tools-2.4.1
    - lscsoft/lal-6.15.0
    - lscsoft/lalframe-1.3.0
before_install:
  - . .travis/build_lal.sh
  - travis_retry pip install -q tornado jinja2 GitPython
  - travis_retry pip install --install-option="--no-cython-compile" Cython
  - travis_retry pip install -q numpy>=1.9.1
  - travis_wait pip install -q scipy>=0.16
  - travis_retry pip install -q matplotlib>=1.3.1
  - travis_retry pip install -q astropy>=1.0
  - travis_retry pip install -q h5py
  - travis_retry pip install -q unittest2
  - travis_retry pip install -q importlib
  - travis_retry pip install -q pytest
  - travis_retry pip install -q coveralls
  - travis_retry pip install -q --egg https://www.lsc-group.phys.uwm.edu/daswg/download/software/source/glue-1.48.tar.gz#egg=glue-1.48
install:
  - python setup.py build
script:
  - coverage run --source=gwpy --omit="gwpy/tests/*,gwpy/*version*" -m py.test -v
  - pip install .
after_success:
  - coveralls
notifications:
  slack:
    secure: jQdoSpwNbUnq0Eo7o6Ko7vuhu58LQdfy8jFKxLUnUjv/GLezK/PPAQCU9SgmyDPh1yD8sb5Xa8UtbNfGtpYdwBAGwZxPHz3oQQAflivFwcF6UP7/NlAB9muSOOnL0QfQyX1I4sIKOkX+gkl+TBciX4v58B8NUU02dDkwDqTLUqQ=
