environment:
  global:
    MINICONDA: C:\Miniconda37-x64
  matrix:
    - PYTHON_VERSION: 3.6
    - PYTHON_VERSION: 3.7
    - PYTHON_VERSION: 3.8
install:
  - "set PATH=%MINICONDA%\\condabin;%PATH%"
  - call "%MINICONDA%\\Scripts\\activate.bat"
  - bash -ex .\ci\install-conda.sh
  - conda activate gwpyci
build_script:
  - bash -ex .\ci\install.sh
test_script:
  - bash -ex .\ci\test.sh
after_test:
  - bash -ex .\ci\codecov.sh
on_finish:
  - ps: (New-Object 'System.Net.WebClient').UploadFile("https://ci.appveyor.com/api/testresults/junit/$($env:APPVEYOR_JOB_ID)", (Resolve-Path .\tests\junit.xml))
